<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Task 10</title>
  </head>
  <body>
    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
    <script type="application/javascript">
        function addPostRow(data) {
            var paragraph = $("<p>");
            var span = $("<span>").text("Post created with id " + data.id + ", title: " + data.title + ", author: " + data.author);
            paragraph.append(span);
            $("body").append(paragraph);
        }

        function listPosts() {
            $.ajax({
                url: 'http://localhost:3000/posts',
                method: 'GET',
                dataType: 'json',
                success: function(data) {
                    data.forEach(function(post) {
                        addPostRow(post);
                    });
                },
                error: function(error) {
                    alert('Server Error');
                    console.error('Error fetching posts:', error);
                }
            });
        }

        $(document).ready(function () {
            listPosts();
        });
    </script>
  </body>
</html>